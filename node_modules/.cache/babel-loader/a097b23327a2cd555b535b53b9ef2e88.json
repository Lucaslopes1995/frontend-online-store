{"ast":null,"code":"var _jsxFileName = \"/home/lucas/Documentos/projetos/sd-021-b-project-frontend-online-store/src/pages/Home.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getCategories, getProductsByNameAndCategory } from '../services/api';\nimport ModalCategories from '../components/ModalCategories';\nimport './Home.css';\nimport loading from '../images/Loading_icon1.gif';\nimport logo from '../images/mercadoLivre.png';\nimport ShoppingCart from './ShoppingCart';\nimport lupa from '../images/lupa.png';\nimport menu from '../images/menu.png';\nimport carrinho from '../images/carrinho.png';\n\nclass Home extends React.Component {\n  constructor() {\n    super();\n\n    this.ordenaProducts = products => {\n      const {\n        selectedFilter\n      } = this.state;\n      let aux;\n\n      if (selectedFilter === \"Maior Preço\") {\n        aux = -1;\n      } else if (selectedFilter === \"Menor Preço\") {\n        aux = 1;\n      } else {\n        return products;\n      }\n\n      const filtered = products.sort((a, b) => {\n        if (a.price < b.price) {\n          return -1 * aux;\n        }\n\n        if (a.price > b.price) {\n          return 1 * aux;\n        }\n\n        return 0;\n      });\n      return filtered;\n    };\n\n    this.filtraFrete = ordenProducts => {\n      const {\n        filterFrete\n      } = this.state;\n\n      if (filterFrete) {\n        return ordenProducts.filter(el => el.shipping.free_shipping);\n      }\n\n      return ordenProducts;\n    };\n\n    this.handleButton = async e => {\n      e.preventDefault();\n      this.setState({\n        APIAwait: false,\n        showFilter: false\n      });\n      const {\n        inputValue,\n        selectedRadio\n      } = this.state;\n\n      if (inputValue !== '' || selectedRadio !== '') {\n        const productsByNameAndCategory = await getProductsByNameAndCategory(selectedRadio, inputValue);\n        const ordenProducts = this.ordenaProducts(productsByNameAndCategory);\n        const fretefilter = this.filtraFrete(ordenProducts);\n        this.setState({\n          filteredProducts: fretefilter,\n          APIAwait: true,\n          showFilter: true,\n          inputValue: ''\n        });\n      }\n    };\n\n    this.filterChange = e => {\n      const {\n        target: {\n          value\n        }\n      } = e;\n      this.setState({\n        selectedFilter: value\n      });\n      this.handleButton(e);\n    };\n\n    this.filterChangeCheckbox = e => {\n      const {\n        target: {\n          checked\n        }\n      } = e;\n      this.setState(() => ({\n        filterFrete: !checked\n      }));\n      console.log(this.state.filterFrete);\n\n      if (checked === false) {\n        this.handleButton(e);\n      }\n    };\n\n    this.addToCart = product => {\n      const {\n        cartProducts\n      } = this.state;\n\n      if (cartProducts.find(el => el.id === product.id) === undefined) {\n        product.tamanho = 1;\n        this.setState({\n          cartProducts: [...cartProducts, product]\n        }, () => {\n          const {\n            cartProducts: Carrinho\n          } = this.state;\n          localStorage.setItem('productCart', JSON.stringify(Carrinho));\n        });\n      } else {\n        let index;\n        [...cartProducts].find((el, i) => {\n          if (el.id === product.id) {\n            index = i;\n            return true;\n          }\n\n          return false;\n        });\n        cartProducts[index].tamanho += 1;\n        this.setState({\n          cartProducts\n        }, () => {\n          const {\n            cartProducts: Carrinho\n          } = this.state;\n          localStorage.setItem('productCart', JSON.stringify(Carrinho));\n        });\n\n        if (product.available_quantity === product.tamanho - 1) {\n          product.tamanho = product.available_quantity;\n        }\n      }\n\n      this.setState(state => {\n        const {\n          cartProducts: cartAtualizado\n        } = state;\n        const total = cartAtualizado.reduce((ant, at) => ant + at.tamanho, 0);\n        return {\n          totalCart: total\n        };\n      });\n    };\n\n    this.closeModal = _ref => {\n      let {\n        target: {\n          className\n        }\n      } = _ref;\n      console.log(className === 'backgound-modal-categories');\n\n      if (className === 'backgound-modal-categories') {\n        this.setState({\n          showCategories: false\n        });\n      }\n    };\n\n    this.closeModalCart = _ref2 => {\n      let {\n        target: {\n          className\n        }\n      } = _ref2;\n      console.log(className === 'backgound-modal-cart');\n\n      if (className === 'backgound-modal-cart') {\n        this.setState({\n          showCart: false\n        });\n      }\n    };\n\n    this.state = {\n      inputValue: '',\n      listProducts: [],\n      listCategories: [],\n      selectedRadio: '',\n      filteredProducts: [],\n      cartProducts: [],\n      totalCart: 0,\n      APIAwait: true,\n      selectedFilter: '',\n      showCategories: false,\n      showFilter: false,\n      filterFrete: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeRadio = this.handleChangeRadio.bind(this);\n    this.setCategories = this.setCategories.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      location: {\n        state: infos\n      }\n    } = this.props;\n\n    if (infos === 'categoria') {\n      this.setState({\n        showCategories: true\n      });\n    } else if (infos === 'carrinho') {\n      this.setState({\n        showCart: true\n      });\n    }\n\n    const getFavorites = JSON.parse(localStorage.getItem('productCart')) || [];\n    const total = getFavorites.reduce((ant, at) => ant + at.tamanho, 0);\n    const ajusteFav = getFavorites || [];\n    this.setState({\n      cartProducts: ajusteFav,\n      totalCart: total\n    });\n    this.setCategories();\n  }\n\n  handleChange(_ref3) {\n    let {\n      target\n    } = _ref3;\n    const {\n      name,\n      value\n    } = target;\n    this.setState(() => ({\n      [name]: value\n    }));\n  }\n\n  handleChangeRadio(e, el) {\n    this.setState({\n      selectedRadio: el.id,\n      showCategories: false\n    }, async () => {\n      this.handleButton(e);\n    });\n  }\n\n  async setCategories() {\n    /* console.log(await getProductsByNameAndCategory('Agro', '')); */\n    const categories = await getCategories();\n    this.setState({\n      listCategories: categories\n    });\n  }\n\n  render() {\n    const {\n      inputValue,\n      listProducts,\n      listCategories,\n      selectedRadio,\n      filteredProducts,\n      totalCart,\n      APIAwait,\n      selectedFilter,\n      showCategories,\n      showCart,\n      showFilter,\n      filterFrete\n    } = this.state;\n    const {\n      history\n    } = this.props;\n    const validListProducts = listProducts.length === 0;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleButton,\n      className: \"form-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"div-logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      alt: \"logo\",\n      className: \"logo-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button-lupa-header\",\n      type: \"submmit\",\n      \"data-testid\": \"query-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: lupa,\n      alt: \"lupa\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"input-header\",\n      name: \"inputValue\",\n      type: \"text\",\n      value: inputValue,\n      onChange: this.handleChange,\n      \"data-testid\": \"query-input\",\n      autocomplete: \"off\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"div-categories\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, showCategories ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"backgound-modal-categories\",\n      onClick: this.closeModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"component-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => this.setState({\n        showCategories: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 15\n      }\n    }, \"x\"), /*#__PURE__*/React.createElement(ModalCategories, {\n      listCategories: listCategories,\n      selectedRadio: selectedRadio,\n      handleChangeRadio: this.handleChangeRadio,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"div-menu\",\n      onClick: () => this.setState({\n        showCategories: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"img\", {\n      src: menu,\n      alt: \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 89\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"div-cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }\n    }, showCart ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"backgound-modal-cart\",\n      onClick: this.closeModalCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"component-modal-cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ShoppingCart, {\n      changeTotalProducts: valortotal => this.setState({\n        totalCart: valortotal\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"div-cart-todo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: carrinho,\n      alt: \"carrinho\",\n      onClick: () => this.setState({\n        showCart: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"total-cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      \"data-testid\": \"shopping-cart-size\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 15\n      }\n    }, totalCart)))))), showFilter && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filtros\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      onChange: e => this.filterChange(e),\n      value: selectedFilter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      hidden: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 11\n      }\n    }, \"Ordenar por Pre\\xE7o\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }\n    }, \"Maior Pre\\xE7o\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 11\n      }\n    }, \"Menor Pre\\xE7o\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"frete-gratis\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      id: \"frete-gratis\",\n      onChange: this.filterChangeCheckbox,\n      value: filterFrete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 13\n      }\n    }))), validListProducts && /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"home-initial-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 11\n      }\n    }, \"Digite algum termo de pesquisa ou escolha uma categoria.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"div-products\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }\n    }, APIAwait ? filteredProducts.map(cada => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"div-all-products\",\n      \"data-testid\": \"product\",\n      key: cada.title,\n      onClick: () => history.push({\n        pathname: `/product/${cada.id}`,\n        state: cada\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"div-img-products\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"img-products\",\n      src: cada.thumbnail,\n      alt: cada.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"div-text-products\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"div-prices-products\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 21\n      }\n    }, \"R$ \" + cada.price.toLocaleString('pt-BR')), cada.shipping.free_shipping && /*#__PURE__*/React.createElement(\"span\", {\n      \"data-testid\": \"free-shipping\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 21\n      }\n    }, \"Frete Gr\\xE1tis\")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 19\n      }\n    }, cada.title)))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loading-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: loading,\n      alt: \"loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 45\n      }\n    }))));\n  }\n\n}\n\nHome.propTypes = {\n  history: PropTypes.instanceOf(Object).isRequired\n};\nexport default Home;","map":{"version":3,"sources":["/home/lucas/Documentos/projetos/sd-021-b-project-frontend-online-store/src/pages/Home.js"],"names":["React","PropTypes","getCategories","getProductsByNameAndCategory","ModalCategories","loading","logo","ShoppingCart","lupa","menu","carrinho","Home","Component","constructor","ordenaProducts","products","selectedFilter","state","aux","filtered","sort","a","b","price","filtraFrete","ordenProducts","filterFrete","filter","el","shipping","free_shipping","handleButton","e","preventDefault","setState","APIAwait","showFilter","inputValue","selectedRadio","productsByNameAndCategory","fretefilter","filteredProducts","filterChange","target","value","filterChangeCheckbox","checked","console","log","addToCart","product","cartProducts","find","id","undefined","tamanho","Carrinho","localStorage","setItem","JSON","stringify","index","i","available_quantity","cartAtualizado","total","reduce","ant","at","totalCart","closeModal","className","showCategories","closeModalCart","showCart","listProducts","listCategories","handleChange","bind","handleChangeRadio","setCategories","componentDidMount","location","infos","props","getFavorites","parse","getItem","ajusteFav","name","categories","render","history","validListProducts","length","valortotal","map","cada","title","push","pathname","thumbnail","toLocaleString","propTypes","instanceOf","Object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { getCategories, getProductsByNameAndCategory } from '../services/api';\nimport ModalCategories from '../components/ModalCategories';\nimport './Home.css'\nimport loading from '../images/Loading_icon1.gif'\nimport logo from '../images/mercadoLivre.png'\nimport ShoppingCart from './ShoppingCart';\nimport lupa from '../images/lupa.png'\nimport menu from '../images/menu.png'\nimport carrinho from '../images/carrinho.png'\n\n\nclass Home extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      inputValue: '',\n      listProducts: [],\n      listCategories: [],\n      selectedRadio: '',\n      filteredProducts: [],\n      cartProducts: [],\n      totalCart: 0,\n      APIAwait:true,\n      selectedFilter:'',\n      showCategories:false,\n      showFilter:false,\n      filterFrete:false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeRadio = this.handleChangeRadio.bind(this);\n    this.setCategories = this.setCategories.bind(this);\n  }\n  \n  componentDidMount() {\n    const { location: { state: infos } } = this.props;\n\n    if(infos==='categoria'){\n      this.setState({showCategories:true})\n    }else if(infos==='carrinho'){\n      this.setState({showCart:true})\n    }\n    const getFavorites = JSON.parse(localStorage.getItem('productCart')) || [];\n\n    const total = getFavorites.reduce((ant, at) => ant + at.tamanho, 0);\n\n    const ajusteFav = getFavorites || [];\n    this.setState({ cartProducts: ajusteFav, totalCart: total });\n\n    this.setCategories();\n  }\n\n  handleChange({ target }) {\n    const { name, value } = target;\n    this.setState(() => ({ [name]: value }));\n  }\n\n  handleChangeRadio(e,el) {\n    this.setState({ selectedRadio: el.id, showCategories:false }, async () => {\n      this.handleButton(e);\n    });\n  }\n  ordenaProducts = (products) => {\n    const {selectedFilter} = this.state;\n    let aux;\n    if(selectedFilter===\"Maior Preço\"){\n      aux=-1;\n    }else if(selectedFilter===\"Menor Preço\"){\n      aux=1;\n    }else{\n      return products;\n    }\n    const filtered = products.sort((a,b)=> {\n      if (a.price<b.price) {\n        return -1*aux;\n      }\n      if (a.price>b.price) {\n        return 1*aux;\n      }\n      return 0;\n    })\n    return filtered\n  }\n\n  filtraFrete = (ordenProducts) => {\n    const {filterFrete} = this.state;\n    if(filterFrete){\n      return ordenProducts.filter(el=>el.shipping.free_shipping)\n    }\n    return ordenProducts\n\n  }\n\n  handleButton = async (e) => {\n    e.preventDefault();\n    this.setState({APIAwait:false, showFilter:false})\n    const { inputValue, selectedRadio } = this.state;\n    if (inputValue !== '' || selectedRadio !== '') {\n      const productsByNameAndCategory = await\n      getProductsByNameAndCategory(selectedRadio, inputValue);\n      const ordenProducts = this.ordenaProducts(productsByNameAndCategory)\n      const fretefilter = this.filtraFrete(ordenProducts)\n      this.setState({ filteredProducts: fretefilter, APIAwait:true, showFilter:true, inputValue:''});\n    }\n  }\n\n  async setCategories() {\n    /* console.log(await getProductsByNameAndCategory('Agro', '')); */\n    const categories = (await getCategories());\n    this.setState({ listCategories: categories });\n  }\n\n  filterChange = (e) => {\n    const {target:{value}} = e\n    this.setState({selectedFilter:value})\n    this.handleButton(e)\n  }\n\n  filterChangeCheckbox = (e) => {\n    const {target:{checked}} = e\n    this.setState(()=>({filterFrete:!checked}))\n    console.log(this.state.filterFrete)\n    if(checked===false){\n      this.handleButton(e)\n\n    }\n\n  }\n\n  addToCart = (product) => {\n    const { cartProducts } = this.state;\n    if (cartProducts.find((el) => el.id === product.id) === undefined) {\n      product.tamanho = 1;\n      this.setState({ cartProducts: [...cartProducts, product] }, () => {\n        const { cartProducts: Carrinho } = this.state;\n        localStorage.setItem('productCart', JSON.stringify(Carrinho));\n      });\n    } else {\n      let index;\n      [...cartProducts].find((el, i) => {\n        if (el.id === product.id) {\n          index = i;\n          return true;\n        }\n        return false;\n      });\n\n      cartProducts[index].tamanho += 1;\n      this.setState({ cartProducts }, () => {\n        const { cartProducts: Carrinho } = this.state;\n        localStorage.setItem('productCart', JSON.stringify(Carrinho));\n      });\n      if (product.available_quantity === product.tamanho - 1) {\n        product.tamanho = product.available_quantity;\n      }\n    }\n\n    this.setState((state) => {\n      const { cartProducts: cartAtualizado } = state;\n      const total = cartAtualizado.reduce((ant, at) => ant + at.tamanho, 0);\n      return { totalCart: total };\n    });\n  }\n\n  closeModal= ({target:{className}}) => {\n    console.log(className==='backgound-modal-categories')\n    if(className==='backgound-modal-categories'){\n      this.setState({showCategories:false})\n    }\n  }\n\n  closeModalCart = ({target:{className}}) => {\n    console.log(className==='backgound-modal-cart')\n    if(className==='backgound-modal-cart'){\n      this.setState({showCart:false})\n    }\n  }\n\n\n  render() {\n    const { inputValue, listProducts, listCategories, selectedRadio,\n      filteredProducts, totalCart, APIAwait, selectedFilter, showCategories, showCart, showFilter, filterFrete  } = this.state;\n    const { history } = this.props;\n    const validListProducts = (listProducts.length === 0);\n    return (\n      <div className='home'>\n        <header>\n          <form onSubmit={this.handleButton} className='form-header'>\n            <div className='div-logo'>\n              <img src={logo} alt='logo'className='logo-header'/>\n            </div>\n            <button\n            className='button-lupa-header'\n            type=\"submmit\"\n            data-testid=\"query-button\"\n          >\n            <img src={lupa} alt='lupa'/>\n          </button>\n          <input\n            className='input-header'\n            name=\"inputValue\"\n            type=\"text\"\n            value={ inputValue }\n            onChange={ this.handleChange }\n            data-testid=\"query-input\"\n            autocomplete='off'\n          />\n          \n\n          <div className='div-categories'>\n          {showCategories?\n          <div className='backgound-modal-categories' onClick={this.closeModal}>\n            <div className='component-modal'>\n              <button type='button' onClick={()=>this.setState({showCategories:false})}>x</button>\n              <ModalCategories \n              listCategories={listCategories} \n              selectedRadio={selectedRadio} \n              handleChangeRadio={this.handleChangeRadio}\n              />\n            </div>\n          </div>:\n          <div className='div-menu' onClick={()=>this.setState({showCategories:true})}> <img src={menu} alt='menu'/></div>\n\n        }\n        </div>\n        <div className='div-cart'>\n        {showCart?\n          <div className='backgound-modal-cart' onClick={this.closeModalCart}>\n            <div className='component-modal-cart'>\n                <ShoppingCart changeTotalProducts={(valortotal)=>this.setState({totalCart:valortotal})}/>\n            </div>\n          </div>:\n          <div className='div-cart-todo'>\n            <img src={carrinho} alt='carrinho' onClick={()=>this.setState({showCart:true})} />\n            <div className='total-cart'>\n              <h4 data-testid=\"shopping-cart-size\">{totalCart}</h4>\n\n            </div>\n          </div>\n        }\n        </div>\n\n          </form>\n        </header>\n        \n        \n\n\n\n\n\n\n\n\n\n\n        \n\n        {showFilter && \n        <div className='filtros'>\n\n        <select onChange={ (e)=>this.filterChange(e)} value={selectedFilter}>\n          <option hidden >Ordenar por Preço</option>\n          <option>Maior Preço</option>\n          <option>Menor Preço</option>\n        </select>\n\n        <hr/>\n\n          <label htmlFor='frete-gratis'>\n\n            <input \n            type='checkbox' \n            id='frete-gratis'\n            onChange={this.filterChangeCheckbox}\n            value={filterFrete}\n            />\n          </label>\n\n        </div>\n        \n        \n        }\n\n\n        {validListProducts && (\n          <p data-testid=\"home-initial-message\">\n            Digite algum termo de pesquisa ou escolha uma categoria.\n          </p>)}\n        \n        <div className='div-products'>\n          {APIAwait ? filteredProducts.map((cada) => (\n            <div\n            className='div-all-products'\n              data-testid=\"product\"\n              key={ cada.title }\n              onClick={ () => history.push({ pathname: `/product/${cada.id}`,\n                  state: (cada) }) }\n            >\n                <div className='div-img-products'>\n                  <img className='img-products' src={cada.thumbnail} alt={cada.title}/>\n                </div>\n                <div className='div-text-products'>\n                  <div className='div-prices-products'>\n                    <h2>{\"R$ \"+cada.price.toLocaleString('pt-BR')}</h2>\n                    {cada.shipping.free_shipping && (\n                    <span data-testid=\"free-shipping\">Frete Grátis</span>)}\n                  </div>\n\n\n                  <p>{cada.title}</p>\n                </div>\n              \n              \n            </div>\n          )) : <div className='loading-div'><img src={loading} alt='loading'/></div>}\n          \n        </div>\n      </div>\n    );\n  }\n}\nHome.propTypes = {\n  history: PropTypes.instanceOf(Object).isRequired,\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}