{"ast":null,"code":"var _jsxFileName = \"/home/lucas/Documentos/projetos/sd-021-b-project-frontend-online-store/src/pages/ProductInfo.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nclass ProductInfo extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      cartProducts: []\n    };\n\n    this.componentDidMount = () => {\n      const {\n        location: {\n          state: infos\n        },\n        history\n      } = this.props;\n      console.log(infos);\n      let getFavorites = JSON.parse(localStorage.getItem('productCart'));\n      const verificaQtd = getFavorites.find(el => {\n        if (el.id === infos.id) {\n          if (el.tamanho === undefined) {\n            el.tamanho = 0;\n          }\n\n          return true;\n          console.log(el.tamanho);\n        }\n      });\n\n      if (verificaQtd === undefined) {}\n\n      console.log(infos.tamanho, verificaQtd);\n      const ajusteFav = getFavorites || [];\n      getFavorites = ajusteFav;\n      this.setState({\n        cartProducts: getFavorites,\n        product: infos\n      });\n    };\n\n    this.addToCart = op => {\n      const {\n        product\n      } = this.state;\n      const getFavorites = JSON.parse(localStorage.getItem('productCart'));\n      const ajusteFav = getFavorites || [];\n      let ajustedCart = ajusteFav.filter(el => el.id !== product.id); // console.log(product)\n\n      if (product.tamanho < 2 && op === -1) {\n        product.tamanho = 1;\n      } else {\n        product.tamanho = product.tamanho ? product.tamanho += op : 1;\n      }\n\n      ajustedCart = [...ajustedCart, product];\n      this.setState({\n        cartProducts: ajustedCart\n      }, () => {\n        const {\n          cartProducts: Carrinho\n        } = this.state;\n        localStorage.setItem('productCart', JSON.stringify(Carrinho));\n      });\n    };\n  }\n\n  render() {\n    const {\n      location: {\n        state: infos\n      },\n      history\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"product-detail-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }\n    }, infos.title), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"product-detail-add-to-cart\",\n      onClick: () => this.addToCart(infos, 1),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, \"Adicionar ao carrinho\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => history.push('/cart'),\n      type: \"button\",\n      \"data-testid\": \"shopping-cart-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, \"Ir para o Carrinho\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }\n    }, \"Quantidade\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"product-increase-quantity\",\n      onClick: () => this.addToCart(1),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    }, \"+\"), /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"product-detail-quantidade\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }, infos.tamanho), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"product-decrease-quantity\",\n      onClick: () => this.addToCart(-1),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    }, \"-\")));\n  }\n\n}\n\nProductInfo.propTypes = {\n  history: PropTypes.instanceOf(Object).isRequired,\n  location: PropTypes.instanceOf(Object).isRequired\n};\nexport default ProductInfo;","map":{"version":3,"sources":["/home/lucas/Documentos/projetos/sd-021-b-project-frontend-online-store/src/pages/ProductInfo.js"],"names":["React","PropTypes","ProductInfo","Component","state","cartProducts","componentDidMount","location","infos","history","props","console","log","getFavorites","JSON","parse","localStorage","getItem","verificaQtd","find","el","id","tamanho","undefined","ajusteFav","setState","product","addToCart","op","ajustedCart","filter","Carrinho","setItem","stringify","render","title","push","propTypes","instanceOf","Object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass ProductInfo extends React.Component {\n  state = {\n    cartProducts: [],\n  }\n\n  componentDidMount = () => {\n    const { location: { state: infos }, history } = this.props;\n\n    console.log(infos)\n\n    \n    let getFavorites = JSON.parse(localStorage.getItem('productCart'));\n\n    const verificaQtd = getFavorites.find(el=>{\n      if(el.id===infos.id){\n        if(el.tamanho ===undefined){\n\n          el.tamanho=0;\n        }\n        return true\n        console.log(el.tamanho)\n      }\n    })\n\n    if(verificaQtd=== undefined){\n\n    }\n\n\n    \n    console.log(infos.tamanho,verificaQtd)\n\n    const ajusteFav = getFavorites || [];\n    getFavorites = ajusteFav;\n    this.setState({ cartProducts: getFavorites,product:infos });\n  }\n\n  addToCart = (op) => {\n    const {product} =this.state\n    const getFavorites = JSON.parse(localStorage.getItem('productCart'));\n    const ajusteFav = getFavorites || [];\n    let ajustedCart = ajusteFav.filter((el) => el.id !== product.id);\n    // console.log(product)\n    if (product.tamanho < 2 && op === -1) {\n      product.tamanho = 1;\n    } else {\n      product.tamanho = (product.tamanho) ? product.tamanho += op : 1;\n    }\n\n    ajustedCart = [...ajustedCart, product];\n\n    this.setState({ cartProducts: ajustedCart }, () => {\n      const { cartProducts: Carrinho } = this.state;\n      localStorage.setItem('productCart', JSON.stringify(Carrinho));\n    });\n  }\n\n  render() {\n    const { location: { state: infos }, history } = this.props;\n\n    return (\n      <div>\n        <form>\n          <p data-testid=\"product-detail-name\">{infos.title}</p>\n        \n          <button\n            type=\"button\"\n            data-testid=\"product-detail-add-to-cart\"\n            onClick={ () => this.addToCart(infos, 1) }\n          >\n            Adicionar ao carrinho\n          </button>\n\n          <button\n            onClick={ () => history.push('/cart') }\n            type=\"button\"\n            data-testid=\"shopping-cart-button\"\n          >\n            Ir para o Carrinho\n\n          </button>\n\n          <p>Quantidade</p>\n          <button\n                type=\"button\"\n                data-testid=\"product-increase-quantity\"\n                onClick={ () => this.addToCart(1) }\n              >\n                +\n              </button>\n              <p data-testid=\"product-detail-quantidade\">{infos.tamanho}</p>\n              <button\n                type=\"button\"\n                data-testid=\"product-decrease-quantity\"\n                onClick={ () => this.addToCart(-1) }\n              >\n                -\n              </button>\n          \n\n        </form>\n      </div>\n    );\n  }\n}\nProductInfo.propTypes = {\n  history: PropTypes.instanceOf(Object).isRequired,\n  location: PropTypes.instanceOf(Object).isRequired,\n\n};\n\nexport default ProductInfo;\n"]},"metadata":{},"sourceType":"module"}