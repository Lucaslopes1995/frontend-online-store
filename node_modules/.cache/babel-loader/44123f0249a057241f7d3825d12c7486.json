{"ast":null,"code":"var _jsxFileName = \"/home/lucas/Documentos/projetos/sd-021-b-project-frontend-online-store/src/pages/ProductInfo.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nconst VERIFICA_CHECKBOX = {\n  3: 3,\n  4: 4\n};\nconst DECREASE_PRODUCT = -1;\n\nclass ProductInfo extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      cartProducts: [],\n      product: {},\n      checkbox0: false,\n      checkbox1: false,\n      checkbox2: false,\n      checkbox3: false,\n      checkbox4: false,\n      showReview: false,\n      email: '',\n      obs: '',\n      totalCart: 0\n    };\n\n    this.componentDidMount = () => {\n      const {\n        location: {\n          state: infos\n        }\n      } = this.props;\n      let getFavorites = JSON.parse(localStorage.getItem('productCart'));\n      const ajusteFav = getFavorites || [];\n      const getReview = JSON.parse(localStorage.getItem('review')) || [];\n      getReview.find(el => {\n        if (el.id === infos.id) {\n          infos.review = el;\n          return true;\n        }\n\n        return false;\n      });\n      const verificaQtd = ajusteFav.find(el => {\n        if (el.id === infos.id) {\n          if (el.tamanho === undefined) {\n            el.tamanho = 0;\n            infos.tamanho = 0;\n          }\n\n          infos.tamanho = el.tamanho;\n          return true;\n        }\n\n        return false;\n      });\n\n      if (verificaQtd === undefined) {\n        infos.tamanho = 0;\n      }\n\n      getFavorites = ajusteFav;\n      this.setState({\n        cartProducts: getFavorites,\n        product: infos\n      }, () => {\n        const {\n          product\n        } = this.state;\n\n        if (product.review) {\n          this.setState({\n            showReview: true\n          });\n        }\n      });\n      const total = ajusteFav.reduce((ant, at) => ant + at.tamanho, 0);\n      this.setState({\n        totalCart: total\n      });\n    };\n\n    this.addToCart = op => {\n      const {\n        product\n      } = this.state;\n      const getFavorites = JSON.parse(localStorage.getItem('productCart'));\n      const ajusteFav = getFavorites || [];\n      let ajustedCart = ajusteFav.filter(el => el.id !== product.id); // console.log(product)\n\n      if (product.tamanho < 2 && op === DECREASE_PRODUCT) {\n        product.tamanho = 1;\n      } else {\n        product.tamanho = product.tamanho ? product.tamanho += op : 1;\n      }\n\n      if (product.available_quantity === product.tamanho - 1) {\n        product.tamanho = product.available_quantity;\n      }\n\n      ajustedCart = [...ajustedCart, product];\n      this.setState({\n        cartProducts: ajustedCart\n      }, () => {\n        const {\n          cartProducts: Carrinho\n        } = this.state;\n        localStorage.setItem('productCart', JSON.stringify(Carrinho));\n        const total = Carrinho.reduce((ant, at) => ant + at.tamanho, 0);\n        this.setState({\n          totalCart: total\n        });\n      });\n    };\n\n    this.validCheckbox = index => {\n      console.log(index < 2);\n      this.setState({\n        checkbox0: index >= 0,\n        checkbox1: index >= 1,\n        checkbox2: index >= 2,\n        checkbox3: index >= VERIFICA_CHECKBOX[3],\n        checkbox4: index >= VERIFICA_CHECKBOX[4]\n      });\n    };\n\n    this.handleInput = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handlesubmit = e => {\n      const {\n        cartProducts,\n        product,\n        checkbox0,\n        checkbox1,\n        checkbox2,\n        checkbox3,\n        checkbox4,\n        email,\n        obs\n      } = this.state;\n      let getReview = JSON.parse(localStorage.getItem('review')) || [];\n      getReview = [...getReview, {\n        id: product.id,\n        checkbox0,\n        checkbox1,\n        checkbox2,\n        checkbox3,\n        checkbox4,\n        email,\n        obs\n      }];\n      const a = [...cartProducts];\n      a.forEach(el => {\n        if (el.id === product.id) {\n          el.review = {\n            product,\n            checkbox0,\n            checkbox1,\n            checkbox2,\n            checkbox3,\n            checkbox4,\n            email,\n            obs\n          };\n        }\n      });\n      e.preventDefault();\n      product.review = {\n        product,\n        checkbox0,\n        checkbox1,\n        checkbox2,\n        checkbox3,\n        checkbox4,\n        email,\n        obs\n      };\n      console.log(product);\n      this.setState(() => this.setState({\n        product,\n        email: '',\n        obs: ''\n      }), () => this.setState({\n        showReview: true\n      }));\n      localStorage.setItem('review', JSON.stringify(getReview));\n    };\n  }\n\n  render() {\n    const {\n      location: {\n        state: infos\n      },\n      history\n    } = this.props;\n    const {\n      product,\n      checkbox0,\n      checkbox1,\n      checkbox2,\n      checkbox3,\n      checkbox4,\n      showReview,\n      email,\n      obs\n    } = this.state;\n    const {\n      totalCart\n    } = this.state;\n    const {\n      checkbox0: reviewheckbox0,\n      checkbox1: reviewheckbox1,\n      checkbox2: reviewheckbox2,\n      checkbox3: reviewheckbox3,\n      checkbox4: reviewheckbox4,\n      email: emailReview,\n      obs: obsReview\n    } = product.review || product;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handlesubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"product-detail-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, product.title), /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"product-detail-email\",\n      name: \"email\",\n      type: \"email\",\n      value: email,\n      onChange: e => this.handleInput(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"1-rating\",\n      checked: checkbox0,\n      onChange: () => this.validCheckbox(0),\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"2-rating\",\n      checked: checkbox1,\n      onChange: () => this.validCheckbox(1),\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"3-rating\",\n      checked: checkbox2,\n      onChange: () => this.validCheckbox(2),\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"4-rating\",\n      checked: checkbox3,\n      onChange: () => this.validCheckbox(VERIFICA_CHECKBOX[3]),\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"5-rating\",\n      checked: checkbox4,\n      onChange: () => this.validCheckbox(VERIFICA_CHECKBOX[4]),\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      \"data-testid\": \"submit-review-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }\n    }, \"Enviar Avalia\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      name: \"obs\",\n      value: obs,\n      \"data-testid\": \"product-detail-evaluation\",\n      onChange: e => this.handleInput(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"product-detail-add-to-cart\",\n      onClick: () => this.addToCart(infos, 1),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, \"Adicionar ao carrinho\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => history.push('/cart'),\n      type: \"button\",\n      \"data-testid\": \"shopping-cart-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }\n    }, \"Ir para o Carrinho\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, \"Quantidade\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"product-increase-quantity\",\n      onClick: () => this.addToCart(1),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }\n    }, \"+\"), /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"product-detail-quantidade\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }\n    }, product.tamanho), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"product-decrease-quantity\",\n      onClick: () => this.addToCart(DECREASE_PRODUCT),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }\n    }, \"-\")), /*#__PURE__*/React.createElement(\"h2\", {\n      \"data-testid\": \"shopping-cart-size\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }\n    }, totalCart), showReview && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }\n    }, emailReview), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 13\n      }\n    }, obsReview), /*#__PURE__*/React.createElement(\"input\", {\n      disabled: true,\n      \"data-testid\": \"review-1-rating\",\n      checked: reviewheckbox0,\n      onChange: () => this.validCheckbox(0),\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      disabled: true,\n      \"data-testid\": \"review-2-rating\",\n      checked: reviewheckbox1,\n      onChange: () => this.validCheckbox(1),\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      disabled: true,\n      \"data-testid\": \"review-3-rating\",\n      checked: reviewheckbox2,\n      onChange: () => this.validCheckbox(2),\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      disabled: true,\n      \"data-testid\": \"review-4-rating\",\n      checked: reviewheckbox3,\n      onChange: () => this.validCheckbox(VERIFICA_CHECKBOX[3]),\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      disabled: true,\n      \"data-testid\": \"review-5-rating\",\n      checked: reviewheckbox4,\n      onChange: () => this.validCheckbox(VERIFICA_CHECKBOX[4]),\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\nProductInfo.propTypes = {\n  history: PropTypes.instanceOf(Object).isRequired,\n  location: PropTypes.instanceOf(Object).isRequired\n};\nexport default ProductInfo;","map":{"version":3,"sources":["/home/lucas/Documentos/projetos/sd-021-b-project-frontend-online-store/src/pages/ProductInfo.js"],"names":["React","PropTypes","VERIFICA_CHECKBOX","DECREASE_PRODUCT","ProductInfo","Component","state","cartProducts","product","checkbox0","checkbox1","checkbox2","checkbox3","checkbox4","showReview","email","obs","totalCart","componentDidMount","location","infos","props","getFavorites","JSON","parse","localStorage","getItem","ajusteFav","getReview","find","el","id","review","verificaQtd","tamanho","undefined","setState","total","reduce","ant","at","addToCart","op","ajustedCart","filter","available_quantity","Carrinho","setItem","stringify","validCheckbox","index","console","log","handleInput","target","name","value","handlesubmit","e","a","forEach","preventDefault","render","history","reviewheckbox0","reviewheckbox1","reviewheckbox2","reviewheckbox3","reviewheckbox4","emailReview","obsReview","title","push","propTypes","instanceOf","Object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst VERIFICA_CHECKBOX = { 3: 3, 4: 4 };\nconst DECREASE_PRODUCT = -1;\n\nclass ProductInfo extends React.Component {\n  state = {\n    cartProducts: [],\n    product: {},\n    checkbox0: false,\n    checkbox1: false,\n    checkbox2: false,\n    checkbox3: false,\n    checkbox4: false,\n    showReview: false,\n    email: '',\n    obs: '',\n    totalCart: 0,\n\n  }\n\n  componentDidMount = () => {\n    const { location: { state: infos } } = this.props;\n\n    let getFavorites = JSON.parse(localStorage.getItem('productCart'));\n    const ajusteFav = getFavorites || [];\n\n    const getReview = JSON.parse(localStorage.getItem('review')) || [];\n\n    getReview.find((el) => {\n      if (el.id === infos.id) {\n        infos.review = el;\n        return true;\n      }\n      return false;\n    });\n\n    const verificaQtd = ajusteFav.find((el) => {\n      if (el.id === infos.id) {\n        if (el.tamanho === undefined) {\n          el.tamanho = 0;\n          infos.tamanho = 0;\n        }\n        infos.tamanho = el.tamanho;\n        return true;\n      }\n      return false;\n    });\n\n    if (verificaQtd === undefined) {\n      infos.tamanho = 0;\n    }\n\n    getFavorites = ajusteFav;\n    this.setState({ cartProducts: getFavorites, product: infos }, () => {\n      const { product } = this.state;\n\n      if (product.review) {\n        this.setState({ showReview: true });\n      }\n    });\n    const total = ajusteFav.reduce((ant, at) => ant + at.tamanho, 0);\n    this.setState({ totalCart: total });\n  }\n\n  addToCart = (op) => {\n    const { product } = this.state;\n    const getFavorites = JSON.parse(localStorage.getItem('productCart'));\n    const ajusteFav = getFavorites || [];\n    let ajustedCart = ajusteFav.filter((el) => el.id !== product.id);\n    // console.log(product)\n    if (product.tamanho < 2 && op === DECREASE_PRODUCT) {\n      product.tamanho = 1;\n    } else {\n      product.tamanho = (product.tamanho) ? product.tamanho += op : 1;\n    }\n\n    if (product.available_quantity === product.tamanho - 1) {\n      product.tamanho = product.available_quantity;\n    }\n\n    ajustedCart = [...ajustedCart, product];\n\n    this.setState({ cartProducts: ajustedCart }, () => {\n      const { cartProducts: Carrinho } = this.state;\n      localStorage.setItem('productCart', JSON.stringify(Carrinho));\n      const total = Carrinho.reduce((ant, at) => ant + at.tamanho, 0);\n      this.setState({ totalCart: total });\n    });\n  }\n\n  validCheckbox = (index) => {\n    console.log(index < 2);\n    this.setState({\n      checkbox0: index >= 0,\n      checkbox1: index >= 1,\n      checkbox2: index >= 2,\n      checkbox3: index >= VERIFICA_CHECKBOX[3],\n      checkbox4: index >= VERIFICA_CHECKBOX[4],\n    });\n  }\n\n  handleInput = ({ target }) => {\n    const { name, value } = target;\n\n    this.setState({ [name]: value });\n  }\n\n  handlesubmit = (e) => {\n    const { cartProducts, product,\n      checkbox0, checkbox1, checkbox2, checkbox3, checkbox4, email, obs } = this.state;\n\n    let getReview = JSON.parse(localStorage.getItem('review')) || [];\n\n    getReview = [...getReview, \n      { id: product.id, checkbox0, checkbox1, checkbox2, checkbox3, checkbox4, email, obs }];\n\n    const a = [...cartProducts];\n    a.forEach((el) => {\n      if (el.id === product.id) {\n        el.review = { product, checkbox0, checkbox1, checkbox2, checkbox3, checkbox4, email, obs };\n      }\n    });\n    e.preventDefault();\n    product.review = (\n      { product, checkbox0, checkbox1, checkbox2, checkbox3, checkbox4, email, obs });\n    console.log(product);\n    this.setState(() => this.setState({ product, email: '', obs: '' }),\n      () => this.setState({ showReview: true }));\n\n    localStorage.setItem('review', JSON.stringify(getReview));\n  }\n\n  render() {\n    const { location: { state: infos }, history } = this.props;\n    const { product, checkbox0, checkbox1, checkbox2,\n      checkbox3, checkbox4, showReview, email, obs } = this.state;\n    const { totalCart } = this.state;\n    const { checkbox0: reviewheckbox0, checkbox1: reviewheckbox1,\n      checkbox2: reviewheckbox2, checkbox3: reviewheckbox3, checkbox4: reviewheckbox4,\n      email: emailReview, obs: obsReview } = product.review || product;\n\n    return (\n      <div>\n        <form onSubmit={ this.handlesubmit }>\n          <p data-testid=\"product-detail-name\">{product.title}</p>\n          <input\n            data-testid=\"product-detail-email\"\n            name=\"email\"\n            type=\"email\"\n            value={ email }\n            onChange={ (e) => this.handleInput(e) }\n          />\n\n          <input\n            data-testid=\"1-rating\"\n            checked={ checkbox0 }\n            onChange={ () => this.validCheckbox(0) }\n            type=\"checkbox\"\n          />\n          <input\n            data-testid=\"2-rating\"\n            checked={ checkbox1 }\n            onChange={ () => this.validCheckbox(1) }\n            type=\"checkbox\"\n          />\n          <input\n            data-testid=\"3-rating\"\n            checked={ checkbox2 }\n            onChange={ () => this.validCheckbox(2) }\n            type=\"checkbox\"\n          />\n          <input\n            data-testid=\"4-rating\"\n            checked={ checkbox3 }\n            onChange={ () => this.validCheckbox(VERIFICA_CHECKBOX[3]) }\n            type=\"checkbox\"\n          />\n          <input\n            data-testid=\"5-rating\"\n            checked={ checkbox4 }\n            onChange={ () => this.validCheckbox(VERIFICA_CHECKBOX[4]) }\n            type=\"checkbox\"\n          />\n          <button type=\"submit\" data-testid=\"submit-review-btn\">Enviar Avaliação</button>\n          <textarea\n            name=\"obs\"\n            value={ obs }\n            data-testid=\"product-detail-evaluation\"\n            onChange={ (e) => this.handleInput(e) }\n          />\n\n          <button\n            type=\"button\"\n            data-testid=\"product-detail-add-to-cart\"\n            onClick={ () => this.addToCart(infos, 1) }\n          >\n            Adicionar ao carrinho\n          </button>\n\n          <button\n            onClick={ () => history.push('/cart') }\n            type=\"button\"\n            data-testid=\"shopping-cart-button\"\n          >\n            Ir para o Carrinho\n\n          </button>\n\n          <p>Quantidade</p>\n          <button\n            type=\"button\"\n            data-testid=\"product-increase-quantity\"\n            onClick={ () => this.addToCart(1) }\n          >\n            +\n          </button>\n          <p data-testid=\"product-detail-quantidade\">{product.tamanho}</p>\n          <button\n            type=\"button\"\n            data-testid=\"product-decrease-quantity\"\n            onClick={ () => this.addToCart(DECREASE_PRODUCT) }\n          >\n            -\n          </button>\n\n        </form>\n\n        <h2 data-testid=\"shopping-cart-size\">{totalCart}</h2>\n\n        {showReview && (\n          <div>\n            <p>{emailReview}</p>\n            <p>{obsReview}</p>\n            <input\n              disabled\n              data-testid=\"review-1-rating\"\n              checked={ reviewheckbox0 }\n              onChange={ () => this.validCheckbox(0) }\n              type=\"checkbox\"\n            />\n            <input\n              disabled\n              data-testid=\"review-2-rating\"\n              checked={ reviewheckbox1 }\n              onChange={ () => this.validCheckbox(1) }\n              type=\"checkbox\"\n            />\n            <input\n              disabled\n              data-testid=\"review-3-rating\"\n              checked={ reviewheckbox2 }\n              onChange={ () => this.validCheckbox(2) }\n              type=\"checkbox\"\n            />\n            <input\n              disabled\n              data-testid=\"review-4-rating\"\n              checked={ reviewheckbox3 }\n              onChange={ () => this.validCheckbox(VERIFICA_CHECKBOX[3]) }\n              type=\"checkbox\"\n            />\n            <input\n              disabled\n              data-testid=\"review-5-rating\"\n              checked={ reviewheckbox4 }\n              onChange={ () => this.validCheckbox(VERIFICA_CHECKBOX[4]) }\n              type=\"checkbox\"\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\nProductInfo.propTypes = {\n  history: PropTypes.instanceOf(Object).isRequired,\n  location: PropTypes.instanceOf(Object).isRequired,\n\n};\n\nexport default ProductInfo;\n"]},"metadata":{},"sourceType":"module"}