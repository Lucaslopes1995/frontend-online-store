{"ast":null,"code":"var _jsxFileName = \"/home/lucas/Documentos/projetos/sd-021-b-project-frontend-online-store/src/pages/ProductInfo.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Checkbox from '../components/Checkbox';\nimport Header from '../components/Header';\nimport './ProductInfo.css';\nimport star from '../images/estrela.png';\nimport starVazia from '../images/estrela-vazia.png';\nconst VERIFICA_CHECKBOX = {\n  3: 3,\n  4: 4\n};\nconst DECREASE_PRODUCT = -1;\n\nclass ProductInfo extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      cartProducts: [],\n      product: {},\n      checkbox0: false,\n      checkbox1: false,\n      checkbox2: false,\n      checkbox3: false,\n      checkbox4: false,\n      showReview: false,\n      email: '',\n      obs: '',\n      totalCart: 0,\n      allreviews: []\n    };\n\n    this.componentDidMount = () => {\n      const {\n        location: {\n          state: infos\n        }\n      } = this.props;\n      let getFavorites = JSON.parse(localStorage.getItem('productCart'));\n      const ajusteFav = getFavorites || [];\n      const getReview = JSON.parse(localStorage.getItem('review')) || [];\n      const filteredReview = getReview.filter(el => {\n        if (el.id === infos.id) {\n          infos.review = el;\n          return true;\n        }\n\n        return false;\n      });\n      this.setState({\n        allreviews: filteredReview\n      });\n      const verificaQtd = ajusteFav.find(el => {\n        if (el.id === infos.id) {\n          if (el.tamanho === undefined) {\n            el.tamanho = 0;\n            infos.tamanho = 0;\n          }\n\n          infos.tamanho = el.tamanho;\n          return true;\n        }\n\n        return false;\n      });\n\n      if (verificaQtd === undefined) {\n        infos.tamanho = 0;\n      }\n\n      getFavorites = ajusteFav;\n      this.setState({\n        cartProducts: getFavorites,\n        product: infos\n      }, () => {\n        const {\n          product\n        } = this.state;\n\n        if (product.review) {\n          this.setState({\n            showReview: true\n          });\n        }\n      });\n      const total = ajusteFav.reduce((ant, at) => ant + at.tamanho, 0);\n      this.setState({\n        totalCart: total\n      });\n    };\n\n    this.addToCart = op => {\n      const {\n        product\n      } = this.state;\n      const getFavorites = JSON.parse(localStorage.getItem('productCart'));\n      const ajusteFav = getFavorites || [];\n      let ajustedCart = ajusteFav.filter(el => el.id !== product.id); // console.log(product)\n\n      if (product.tamanho < 2 && op === DECREASE_PRODUCT) {\n        product.tamanho = 1;\n      } else {\n        product.tamanho = product.tamanho ? product.tamanho += op : 1;\n      }\n\n      if (product.available_quantity === product.tamanho - 1) {\n        product.tamanho = product.available_quantity;\n      }\n\n      ajustedCart = [...ajustedCart, product];\n      this.setState({\n        cartProducts: ajustedCart\n      }, () => {\n        const {\n          cartProducts: Carrinho\n        } = this.state;\n        localStorage.setItem('productCart', JSON.stringify(Carrinho));\n        const total = Carrinho.reduce((ant, at) => ant + at.tamanho, 0);\n        this.setState({\n          totalCart: total\n        });\n      });\n    };\n\n    this.validCheckbox = index => {\n      this.setState({\n        checkbox0: index >= 0,\n        checkbox1: index >= 1,\n        checkbox2: index >= 2,\n        checkbox3: index >= VERIFICA_CHECKBOX[3],\n        checkbox4: index >= VERIFICA_CHECKBOX[4]\n      });\n    };\n\n    this.handleInput = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handlesubmit = e => {\n      const {\n        location: {\n          state: infos\n        }\n      } = this.props;\n      const {\n        cartProducts,\n        product,\n        checkbox0,\n        checkbox1,\n        checkbox2,\n        checkbox3,\n        checkbox4,\n        email,\n        obs\n      } = this.state;\n      let getReview = JSON.parse(localStorage.getItem('review')) || [];\n      const aux1 = {\n        checkbox0,\n        checkbox1,\n        checkbox2,\n        checkbox3,\n        checkbox4\n      };\n      getReview = [...getReview, {\n        id: product.id,\n        ...aux1,\n        email,\n        obs\n      }];\n      const filteredReview = getReview.filter(el => {\n        if (el.id === infos.id) {\n          infos.review = el;\n          return true;\n        }\n\n        return false;\n      });\n      const a = [...cartProducts];\n      a.forEach(el => {\n        if (el.id === product.id) {\n          const aux = {\n            product,\n            checkbox0,\n            checkbox1,\n            checkbox2\n          };\n          el.review = { ...aux,\n            checkbox3,\n            checkbox4,\n            email,\n            obs\n          };\n        }\n      });\n      e.preventDefault();\n      product.review = {\n        product,\n        checkbox0,\n        checkbox1,\n        checkbox2,\n        checkbox3,\n        checkbox4,\n        email,\n        obs\n      };\n      this.setState(() => this.setState({\n        product,\n        email: '',\n        obs: '',\n        checkbox0: false,\n        checkbox1: false,\n        checkbox2: false,\n        checkbox3: false,\n        checkbox4: false\n      }), () => this.setState({\n        showReview: true,\n        allreviews: filteredReview\n      }));\n      localStorage.setItem('review', JSON.stringify(getReview));\n    };\n  }\n\n  render() {\n    var _product$price;\n\n    const {\n      location: {\n        state: infos\n      },\n      history\n    } = this.props;\n    const {\n      product,\n      checkbox0,\n      checkbox1,\n      checkbox2,\n      checkbox3,\n      checkbox4,\n      showReview,\n      email,\n      obs,\n      allreviews\n    } = this.state;\n    const {\n      totalCart\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      history: history,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"carac-product\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"product-detail-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }, product.title), /*#__PURE__*/React.createElement(\"img\", {\n      src: product.thumbnail,\n      alt: product.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"details-price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }\n    }, \"R$ \", (_product$price = product.price) === null || _product$price === void 0 ? void 0 : _product$price.toLocaleString('pt-BR')), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }\n    }, \"Quantidade\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button-inc-dec\",\n      type: \"button\",\n      \"data-testid\": \"product-increase-quantity\",\n      onClick: () => this.addToCart(1),\n      disabled: product.available_quantity === product.tamanho,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }\n    }, \"+\"), /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"product-detail-quantidade\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }\n    }, product.tamanho), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button-inc-dec\",\n      type: \"button\",\n      \"data-testid\": \"product-decrease-quantity\",\n      onClick: () => this.addToCart(DECREASE_PRODUCT),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }\n    }, \"-\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"go-cart\",\n      onClick: () => history.push('/cart'),\n      type: \"button\",\n      \"data-testid\": \"shopping-cart-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }\n    }, \"Ir para o Carrinho\"), /*#__PURE__*/React.createElement(\"h2\", {\n      \"data-testid\": \"shopping-cart-size\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }\n    }, 'Quantidade total de produtos no Carrinho: ' + totalCart)), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handlesubmit,\n      className: \"form-avaliation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    }, \"Deixe sua Avalia\\xE7\\xE3o do Produto\"), /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"email\",\n      \"data-testid\": \"product-detail-email\",\n      name: \"email\",\n      type: \"email\",\n      value: email,\n      onChange: e => this.handleInput(e),\n      autocomplete: \"off\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"all-stars\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"1-rating\",\n      className: \"label-stars-sending\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      dti: \"1-rating\",\n      ch: checkbox0,\n      oc: this.validCheckbox,\n      d: \"n\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: checkbox0 ? star : starVazia,\n      alt: \"star\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"2-rating\",\n      className: \"label-stars-sending\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      dti: \"2-rating\",\n      ch: checkbox1,\n      oc: this.validCheckbox,\n      d: \"n\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: checkbox1 ? star : starVazia,\n      alt: \"star\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"3-rating\",\n      className: \"label-stars-sending\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      dti: \"3-rating\",\n      ch: checkbox2,\n      oc: this.validCheckbox,\n      d: \"n\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: checkbox2 ? star : starVazia,\n      alt: \"star\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"4-rating\",\n      className: \"label-stars-sending\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      dti: \"4-rating\",\n      ch: checkbox3,\n      oc: this.validCheckbox,\n      d: \"n\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: checkbox3 ? star : starVazia,\n      alt: \"star\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"5-rating\",\n      className: \"label-stars-sending\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      dti: \"5-rating\",\n      ch: checkbox4,\n      oc: this.validCheckbox,\n      d: \"n\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: checkbox4 ? star : starVazia,\n      alt: \"star\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"textarea\", {\n      placeholder: \"mensagem\",\n      name: \"obs\",\n      value: obs,\n      \"data-testid\": \"product-detail-evaluation\",\n      onChange: e => this.handleInput(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      \"data-testid\": \"submit-review-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 11\n      }\n    }, \"Enviar Avalia\\xE7\\xE3o\")), showReview && allreviews.map(el => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"review\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 13\n      }\n    }, el.email), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 13\n      }\n    }, el.obs), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"all-stars\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"review-1-rating\",\n      className: \"label-stars-sending\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      dti: \"review-1-rating\",\n      ch: el.checkbox0,\n      oc: this.validCheckbox,\n      d: \"s\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: el.checkbox0 ? star : starVazia,\n      alt: \"star\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"review-2-rating\",\n      className: \"label-stars-sending\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      dti: \"review-2-rating\",\n      ch: el.checkbox1,\n      oc: this.validCheckbox,\n      d: \"s\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: el.checkbox1 ? star : starVazia,\n      alt: \"star\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"review-3-rating\",\n      className: \"label-stars-sending\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      dti: \"review-3-rating\",\n      ch: el.checkbox2,\n      oc: this.validCheckbox,\n      d: \"s\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: el.checkbox2 ? star : starVazia,\n      alt: \"star\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"review-4-rating\",\n      className: \"label-stars-sending\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      dti: \"review-4-rating\",\n      ch: el.checkbox3,\n      oc: this.validCheckbox,\n      d: \"s\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: el.checkbox3 ? star : starVazia,\n      alt: \"star\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"review-5-rating\",\n      className: \"label-stars-sending\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      dti: \"review-5-rating\",\n      ch: el.checkbox4,\n      oc: this.validCheckbox,\n      d: \"s\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: el.checkbox4 ? star : starVazia,\n      alt: \"star\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 13\n      }\n    }))))));\n  }\n\n}\n\nProductInfo.propTypes = {\n  history: PropTypes.instanceOf(Object).isRequired,\n  location: PropTypes.instanceOf(Object).isRequired\n};\nexport default ProductInfo;","map":{"version":3,"sources":["/home/lucas/Documentos/projetos/sd-021-b-project-frontend-online-store/src/pages/ProductInfo.js"],"names":["React","PropTypes","Checkbox","Header","star","starVazia","VERIFICA_CHECKBOX","DECREASE_PRODUCT","ProductInfo","Component","state","cartProducts","product","checkbox0","checkbox1","checkbox2","checkbox3","checkbox4","showReview","email","obs","totalCart","allreviews","componentDidMount","location","infos","props","getFavorites","JSON","parse","localStorage","getItem","ajusteFav","getReview","filteredReview","filter","el","id","review","setState","verificaQtd","find","tamanho","undefined","total","reduce","ant","at","addToCart","op","ajustedCart","available_quantity","Carrinho","setItem","stringify","validCheckbox","index","handleInput","target","name","value","handlesubmit","e","aux1","a","forEach","aux","preventDefault","render","history","title","thumbnail","price","toLocaleString","push","map","propTypes","instanceOf","Object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Checkbox from '../components/Checkbox';\nimport Header from '../components/Header';\nimport './ProductInfo.css'\nimport star from '../images/estrela.png'\nimport starVazia from '../images/estrela-vazia.png'\n\nconst VERIFICA_CHECKBOX = { 3: 3, 4: 4 };\nconst DECREASE_PRODUCT = -1;\n\nclass ProductInfo extends React.Component {\n  state = {\n    cartProducts: [],\n    product: {},\n    checkbox0: false,\n    checkbox1: false,\n    checkbox2: false,\n    checkbox3: false,\n    checkbox4: false,\n    showReview: false,\n    email: '',\n    obs: '',\n    totalCart: 0,\n    allreviews:[]\n\n  }\n\n  componentDidMount = () => {\n    const { location: { state: infos } } = this.props;\n\n    let getFavorites = JSON.parse(localStorage.getItem('productCart'));\n    const ajusteFav = getFavorites || [];\n\n    const getReview = JSON.parse(localStorage.getItem('review')) || [];\n\n    const filteredReview = getReview.filter((el) => {\n      if (el.id === infos.id) {\n        infos.review = el;\n        return true;\n      }\n      return false;\n    });\n\n    this.setState({allreviews:filteredReview})\n\n    const verificaQtd = ajusteFav.find((el) => {\n      if (el.id === infos.id) {\n        if (el.tamanho === undefined) {\n          el.tamanho = 0;\n          infos.tamanho = 0;\n        }\n        infos.tamanho = el.tamanho;\n        return true;\n      }\n      return false;\n    });\n\n    if (verificaQtd === undefined) {\n      infos.tamanho = 0;\n    }\n\n    getFavorites = ajusteFav;\n    this.setState({ cartProducts: getFavorites, product: infos }, () => {\n      const { product } = this.state;\n\n      if (product.review) {\n        this.setState({ showReview: true });\n      }\n    });\n    const total = ajusteFav.reduce((ant, at) => ant + at.tamanho, 0);\n    this.setState({ totalCart: total });\n  }\n\n  addToCart = (op) => {\n    const { product } = this.state;\n    const getFavorites = JSON.parse(localStorage.getItem('productCart'));\n    const ajusteFav = getFavorites || [];\n    let ajustedCart = ajusteFav.filter((el) => el.id !== product.id);\n    // console.log(product)\n    if (product.tamanho < 2 && op === DECREASE_PRODUCT) {\n      product.tamanho = 1;\n    } else {\n      product.tamanho = (product.tamanho) ? product.tamanho += op : 1;\n    }\n\n    if (product.available_quantity === product.tamanho - 1) {\n      product.tamanho = product.available_quantity;\n    }\n\n    ajustedCart = [...ajustedCart, product];\n\n    this.setState({ cartProducts: ajustedCart }, () => {\n      const { cartProducts: Carrinho } = this.state;\n      localStorage.setItem('productCart', JSON.stringify(Carrinho));\n      const total = Carrinho.reduce((ant, at) => ant + at.tamanho, 0);\n      this.setState({ totalCart: total });\n    });\n  }\n\n  validCheckbox = (index) => {\n    this.setState({\n      checkbox0: index >= 0,\n      checkbox1: index >= 1,\n      checkbox2: index >= 2,\n      checkbox3: index >= VERIFICA_CHECKBOX[3],\n      checkbox4: index >= VERIFICA_CHECKBOX[4],\n    });\n  }\n\n  handleInput = ({ target }) => {\n    const { name, value } = target;\n\n    this.setState({ [name]: value });\n  }\n\n  handlesubmit = (e) => {\n    const { location: { state: infos } } = this.props;\n    const { cartProducts, product,\n      checkbox0, checkbox1, checkbox2, checkbox3, checkbox4, email, obs } = this.state;\n\n    let getReview = JSON.parse(localStorage.getItem('review')) || [];\n    const aux1 = { checkbox0, checkbox1, checkbox2, checkbox3, checkbox4 };\n\n    \n\n    getReview = [...getReview,\n      { id: product.id, ...aux1, email, obs }];\n\n    const filteredReview = getReview.filter((el) => {\n      if (el.id === infos.id) {\n        infos.review = el;\n        return true;\n      }\n      return false;\n    });\n\n    const a = [...cartProducts];\n    a.forEach((el) => {\n      if (el.id === product.id) {\n        const aux = { product, checkbox0, checkbox1, checkbox2 };\n        el.review = { ...aux, checkbox3, checkbox4, email, obs };\n      }\n    });\n    e.preventDefault();\n    product.review = (\n      { product, checkbox0, checkbox1, checkbox2, checkbox3, checkbox4, email, obs });\n    this.setState(() => this.setState({ product, email: '', obs: '',checkbox0:false, checkbox1:false, checkbox2:false, checkbox3:false, checkbox4:false }),\n      () => this.setState({ showReview: true, allreviews:filteredReview }));\n\n    localStorage.setItem('review', JSON.stringify(getReview));\n  }\n\n  render() {\n    const { location: { state: infos }, history } = this.props;\n    const { product, checkbox0, checkbox1, checkbox2,\n      checkbox3, checkbox4, showReview, email, obs, allreviews } = this.state;\n    const { totalCart } = this.state;\n\n    return (\n      <div>\n        <Header history={history}/>\n        <div className='carac-product'>\n          <p className=\"product-detail-name\">{product.title}</p>\n          <img src={product.thumbnail} alt={product.title}/>\n\n          <p className=\"details-price\">R$ {product.price?.toLocaleString('pt-BR')}</p>\n\n          <p>Quantidade</p>\n          <button\n          className='button-inc-dec'\n            type=\"button\"\n            data-testid=\"product-increase-quantity\"\n            onClick={ () => this.addToCart(1) }\n            disabled={product.available_quantity === product.tamanho}\n          >\n            +\n          </button>\n          <p data-testid=\"product-detail-quantidade\">{product.tamanho}</p>\n          <button\n          className='button-inc-dec'\n            type=\"button\"\n            data-testid=\"product-decrease-quantity\"\n            onClick={ () => this.addToCart(DECREASE_PRODUCT) }\n          >\n            -\n          </button>\n\n          <button\n          className='go-cart'\n            onClick={ () => history.push('/cart') }\n            type=\"button\"\n            data-testid=\"shopping-cart-button\"\n          >\n            Ir para o Carrinho\n\n          </button>\n\n          <h2 data-testid=\"shopping-cart-size\">{'Quantidade total de produtos no Carrinho: ' +totalCart}</h2>\n\n\n        </div>\n        \n        <hr/>\n        <form onSubmit={ this.handlesubmit } className='form-avaliation'>\n          <h3>Deixe sua Avaliação do Produto</h3>\n          <input\n            placeholder='email'\n            data-testid=\"product-detail-email\"\n            name=\"email\"\n            type=\"email\"\n            value={ email }\n            onChange={ (e) => this.handleInput(e) }\n            autocomplete='off'\n          />\n          <div className='all-stars'>\n          <label htmlFor='1-rating' className='label-stars-sending'>\n            <Checkbox dti=\"1-rating\" ch={ checkbox0 } oc={ this.validCheckbox } d=\"n\" />\n            <img src={checkbox0 ? star :starVazia} alt='star' />\n          </label>\n          <label htmlFor='2-rating' className='label-stars-sending'>\n\n            <Checkbox dti=\"2-rating\" ch={ checkbox1 } oc={ this.validCheckbox } d=\"n\" />\n            <img src={checkbox1 ? star :starVazia} alt='star' />\n          </label>\n          <label htmlFor='3-rating' className='label-stars-sending'>\n\n            <Checkbox dti=\"3-rating\" ch={ checkbox2 } oc={ this.validCheckbox } d=\"n\" />\n            <img src={checkbox2 ? star :starVazia} alt='star' />\n          </label>\n          <label htmlFor='4-rating' className='label-stars-sending'>\n\n            <Checkbox dti=\"4-rating\" ch={ checkbox3 } oc={ this.validCheckbox } d=\"n\" />\n            <img src={checkbox3 ? star :starVazia} alt='star' />\n          </label>\n          <label htmlFor='5-rating' className='label-stars-sending'>\n\n            <Checkbox dti=\"5-rating\" ch={ checkbox4 } oc={ this.validCheckbox } d=\"n\" />\n            <img src={checkbox4 ? star :starVazia} alt='star' />\n          </label>\n          </div>\n          \n          <textarea\n            placeholder='mensagem'\n            name=\"obs\"\n            value={ obs }\n            data-testid=\"product-detail-evaluation\"\n            onChange={ (e) => this.handleInput(e) }\n          />\n          <button type=\"submit\" data-testid=\"submit-review-btn\">Enviar Avaliação</button>\n\n          \n\n          \n\n        </form>\n\n       \n        {showReview && (allreviews.map(el=> (\n          <div className='review'>\n            <p>{el.email}</p>\n            <p>{el.obs}</p>\n            <div>\n\n              \n            </div>\n\n            <div className='all-stars'>\n            <label htmlFor='review-1-rating' className='label-stars-sending'>\n            <Checkbox dti=\"review-1-rating\" ch={ el.checkbox0 } oc={ this.validCheckbox } d=\"s\" />\n            <img src={el.checkbox0 ? star :starVazia} alt='star' />\n            </label>\n            <label htmlFor='review-2-rating' className='label-stars-sending'>\n            <Checkbox dti=\"review-2-rating\" ch={ el.checkbox1 } oc={ this.validCheckbox } d=\"s\" />\n            <img src={el.checkbox1 ? star :starVazia} alt='star' />\n            </label>\n            <label htmlFor='review-3-rating' className='label-stars-sending'>\n            <Checkbox dti=\"review-3-rating\" ch={ el.checkbox2 } oc={ this.validCheckbox } d=\"s\" />\n            <img src={el.checkbox2 ? star :starVazia} alt='star' />\n            </label>\n            <label htmlFor='review-4-rating' className='label-stars-sending'>\n            <Checkbox dti=\"review-4-rating\" ch={ el.checkbox3 } oc={ this.validCheckbox } d=\"s\" />\n            <img src={el.checkbox3 ? star :starVazia} alt='star' />\n            </label>\n            <label htmlFor='review-5-rating' className='label-stars-sending'>\n            <Checkbox dti=\"review-5-rating\" ch={ el.checkbox4 } oc={ this.validCheckbox } d=\"s\" />\n            <img src={el.checkbox4 ? star :starVazia} alt='star' />\n            </label>\n            </div>\n\n          </div>))\n        )}\n      </div>\n    );\n  }\n}\nProductInfo.propTypes = {\n  history: PropTypes.instanceOf(Object).isRequired,\n  location: PropTypes.instanceOf(Object).isRequired,\n\n};\n\nexport default ProductInfo;\n"]},"metadata":{},"sourceType":"module"}