{"ast":null,"code":"var _jsxFileName = \"/home/lucas/Documentos/projetos/sd-021-b-project-frontend-online-store/src/pages/ShoppingCart.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nconst DECREASE_PRODUCT = -1;\n\nclass ShoppingCart extends React.Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = () => {\n      const getCart = JSON.parse(localStorage.getItem('productCart'));\n      const ajusteFav = getCart || [];\n      const total = ajusteFav.reduce((ant, at) => ant + at.tamanho, 0);\n      this.setState({\n        listCart: ajusteFav,\n        totalCart: total\n      });\n    };\n\n    this.ajustNewProduct = (fav, op, del) => {\n      const {\n        listCart\n      } = this.state;\n\n      if (del) {\n        const a = listCart.filter(el => el.id !== fav.id);\n        const total = listCart.reduce((ant, at) => ant + at.tamanho, 0);\n        this.setState({\n          listCart: a\n        }, this.setState({\n          totalCart: total\n        }));\n        localStorage.setItem('productCart', JSON.stringify(a));\n        return false;\n      }\n\n      listCart.filter(el => el.id !== fav.id);\n\n      if (fav.tamanho < 2 && op === DECREASE_PRODUCT) {\n        fav.tamanho = 1;\n      } else {\n        fav.tamanho += op;\n      }\n\n      if (fav.available_quantity === fav.tamanho - 1) {\n        fav.tamanho = fav.available_quantity;\n      }\n\n      this.setState({\n        totalCart: 0\n      }, () => {\n        const {\n          listCart: Carrinho\n        } = this.state;\n        const total = Carrinho.reduce((ant, at) => ant + at.tamanho, 0);\n        this.setState({\n          totalCart: total\n        });\n        localStorage.setItem('productCart', JSON.stringify(Carrinho));\n      });\n    };\n\n    this.state = {\n      listCart: [],\n      totalCart: 0\n    };\n  }\n\n  render() {\n    const {\n      listCart,\n      totalCart\n    } = this.state;\n    const validListCart = listCart.length === 0;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }\n    }, validListCart && /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"shopping-cart-empty-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }\n    }, \"Seu carrinho est\\xE1 vazio\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }, listCart.map(fav => /*#__PURE__*/React.createElement(\"div\", {\n      key: fav.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"shopping-cart-product-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }, fav.title), /*#__PURE__*/React.createElement(\"img\", {\n      src: fav.thumbnail,\n      alt: fav.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"shopping-cart-product-quantity\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 15\n      }\n    }, fav.tamanho), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"product-increase-quantity\",\n      onClick: () => this.ajustNewProduct(fav, 1, false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }\n    }, \"+\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"product-decrease-quantity\",\n      onClick: () => this.ajustNewProduct(fav, DECREASE_PRODUCT, false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 15\n      }\n    }, \"-\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"product-decrease-quantity\",\n      onClick: () => this.ajustNewProduct(fav, DECREASE_PRODUCT, true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }\n    }, \"Del\"))), /*#__PURE__*/React.createElement(\"h2\", {\n      \"data-testid\": \"shopping-cart-size\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, totalCart), /*#__PURE__*/React.createElement(Link, {\n      to: \"/checkout\",\n      \"data-testid\": \"checkout-products\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, \"Finalizar Compra\")));\n  }\n\n}\n\nexport default ShoppingCart;","map":{"version":3,"sources":["/home/lucas/Documentos/projetos/sd-021-b-project-frontend-online-store/src/pages/ShoppingCart.js"],"names":["React","Link","DECREASE_PRODUCT","ShoppingCart","Component","constructor","componentDidMount","getCart","JSON","parse","localStorage","getItem","ajusteFav","total","reduce","ant","at","tamanho","setState","listCart","totalCart","ajustNewProduct","fav","op","del","state","a","filter","el","id","setItem","stringify","available_quantity","Carrinho","render","validListCart","length","map","title","thumbnail"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst DECREASE_PRODUCT = -1;\n\nclass ShoppingCart extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      listCart: [],\n      totalCart: 0,\n    };\n  }\n\n  componentDidMount = () => {\n    const getCart = JSON.parse(localStorage.getItem('productCart'));\n    const ajusteFav = getCart || [];\n    const total = ajusteFav.reduce((ant, at) => ant + at.tamanho, 0);\n    this.setState({ listCart: ajusteFav, totalCart: total });\n  }\n\n  ajustNewProduct= (fav, op, del) => {\n    const { listCart } = this.state;\n\n    if(del){\n      const a = listCart.filter((el) => el.id !== fav.id);\n      const total = listCart.reduce((ant, at) => ant + at.tamanho, 0);\n      this.setState({listCart: a},this.setState({totalCart:total}))\n      localStorage.setItem('productCart', JSON.stringify(a));\n      return false\n    }\n\n    listCart.filter((el) => el.id !== fav.id);\n\n    if (fav.tamanho < 2 && op === DECREASE_PRODUCT) {\n      fav.tamanho = 1;\n    } else {\n      fav.tamanho += op;\n    }\n\n    if (fav.available_quantity === fav.tamanho - 1) {\n      fav.tamanho = fav.available_quantity;\n    }\n\n    this.setState({ totalCart: 0 }, () => {\n      const { listCart: Carrinho } = this.state;\n      const total = Carrinho.reduce((ant, at) => ant + at.tamanho, 0);\n      this.setState({ totalCart: total });\n      localStorage.setItem('productCart', JSON.stringify(Carrinho));\n    });\n  }\n\n  render() {\n    const { listCart, totalCart } = this.state;\n    const validListCart = (listCart.length === 0);\n    return (\n      <div>\n        {validListCart && (\n          <p data-testid=\"shopping-cart-empty-message\">\n            Seu carrinho está vazio\n          </p>)}\n        <div>\n          {listCart.map((fav) => (\n            <div key={ fav.id }>\n              <p data-testid=\"shopping-cart-product-name\">{fav.title}</p>\n              <img src={fav.thumbnail} alt={fav.title}/>\n              <p data-testid=\"shopping-cart-product-quantity\">{fav.tamanho}</p>\n              <button\n                type=\"button\"\n                data-testid=\"product-increase-quantity\"\n                onClick={ () => this.ajustNewProduct(fav, 1,false) }\n              >\n                +\n              </button>\n              <button\n                type=\"button\"\n                data-testid=\"product-decrease-quantity\"\n                onClick={ () => this.ajustNewProduct(fav, DECREASE_PRODUCT,false) }\n              >\n                -\n              </button>\n              <button\n                type=\"button\"\n                data-testid=\"product-decrease-quantity\"\n                onClick={ () => this.ajustNewProduct(fav, DECREASE_PRODUCT,true) }\n              >\n                Del\n              </button>\n\n            </div>\n\n          ))}\n          <h2 data-testid=\"shopping-cart-size\">{totalCart}</h2>\n          <Link\n            to=\"/checkout\"\n            data-testid=\"checkout-products\"\n          >\n            Finalizar Compra\n          </Link>\n        </div>\n      </div>\n    );\n  }\n}\nexport default ShoppingCart;\n"]},"metadata":{},"sourceType":"module"}